// Library: binding-tc, Android Easy Binding (AEB)

apply plugin: 'com.android.library'

/* DEFINE REPOSITORY WITH LATEST ROBOLECTRIC VERSION */
repositories {
  mavenCentral()
  maven {
    url 'https://oss.sonatype.org/content/repositories/snapshots/'
  }
}

dependencies {
  /* =========================== */
  /*         DEBUG/RELEASE       */
  /* =========================== */
  compile fileTree(dir: 'libs', includes: ['*.jar'])
  compile "com.android.support:support-v4:${androidSupportLib}"
  compile 'org.hamcrest:hamcrest-core:+',
          'org.hamcrest:hamcrest-library:+'

  /* =========================== */
  /*         UNIT TESTING        */
  /* =========================== */

  // unit tests libs. Rule: repeated Libs should be excluded.
  androidTestCompile fileTree(dir: 'src/tests/libs', include: '*.jar')

  /* UNIT TESTS HAS DEPENDENCY ON SUPPORT LIB, SO INCLUDE IT MANUALLY FOR CONTROLLING THE VERSION OF IT */
  androidTestCompile "com.android.support:support-v4:${androidSupportLib}"

  /* Hamcrest (v1.3) */
  androidTestCompile 'org.hamcrest:hamcrest-core:+'
  androidTestCompile 'org.hamcrest:hamcrest-library:+'
  androidTestCompile 'org.hamcrest:hamcrest-integration:+'

  /* Mockito (v1.9.5) */
  androidTestCompile 'org.mockito:mockito-all:+'

  /* jUnit (v4.12 beta 1) */
  androidTestCompile('junit:junit:+') { exclude module: 'hamcrest-core' }

  /* Robolectric (v2.3) */
  androidTestCompile('org.robolectric:robolectric:+') {
    exclude module: 'classworlds'
    exclude module: 'maven-artifact'
    exclude module: 'maven-artifact-manager'
    exclude module: 'maven-error-diagnostics'
    exclude module: 'maven-model'
    exclude module: 'maven-plugin-registry'
    exclude module: 'maven-profile'
    exclude module: 'maven-project'
    exclude module: 'maven-settings'
    exclude module: 'nekohtml'
    exclude module: 'plexus-container-default'
    exclude module: 'plexus-interpolation'
    exclude module: 'plexus-utils'
    exclude module: 'wagon-file'
    exclude module: 'wagon-http-lightweight'
    exclude module: 'wagon-http-shared'
    exclude module: 'wagon-provider-api'
  }
}

android {
  compileSdkVersion androidCompileSdkVersion
  buildToolsVersion androidBuildToolsVersion

  // Android Manifest generation options
  defaultConfig {
    minSdkVersion androidMinSdkVersion /* 10 */
    targetSdkVersion androidTargetSdkVersion /* 19 */

    versionCode 1
    versionName "1.0"
  }

  buildTypes {
    release {
      runProguard false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.txt'
    }
  }

  sourceSets {
    androidTest.setRoot('src/tests')
    androidTest {
      // default path is '~/java'
      java.srcDirs = ['src/tests/java']
    }
  }
}
